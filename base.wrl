#VRML V2.0 utf8

#caméra suivant la balle
DEF camera Transform{
  center -6.0 -4.2 0 #centre de rotation de la caméra
  children Viewpoint{
    fieldOfView 0.785392
    position -6.0 -3.5 3.0
    jump FALSE
    orientation 0 1.0 0 0.0
    description "Balle"
  }
}


#terrain noel
DEF Noel Transform{
  translation 10.0 0 -6.0
  rotation 0 1 0 1.57
  children Inline {url["SnowHole.wrl"]}
}

#balle de golf
DEF Balle Transform{
  translation -6.0 -4.2 0
  children Inline{url["golfball.wrl"]}
}

DEF	KS KbdSensor{ isActive TRUE }

DEF	RotateCam Script	{
  eventIn	SFInt32	KeyPressed
	eventOut SFRotation	Orientation
	field SFFloat angle 0	   # Angle de rotation

    url ["javascript:

	function KeyPressed(v, t){
			if (v == 65601)	// Touche 'a'  --> tourne dans le sens anti-horaire
			{ angle = angle + 0.02; }

			if (v == 65604)	// Touche 'd'  --> tourne dans le sens horaire
			{ angle = angle - 0.02; }

			Orientation[0] = 0;
			Orientation[1] = 1; //rotation sur l'axe y
			Orientation[2] = 0;
			Orientation[3] = angle;
		}


	"]	# Fin du corps du script
}

#rotation de la caméra autour de la balle
ROUTE KS.keyDown TO RotateCam.KeyPressed
ROUTE RotateCam.Orientation TO camera.rotation

ROUTE KS.keyDown TO BallMove.KP
ROUTE BallMove.Movement TO Balle.translation

ROUTE KS.keyDown TO CamMove.KP
ROUTE CamMove.Movement TO camera.translation
